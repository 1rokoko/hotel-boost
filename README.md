# WhatsApp Hotel Bot MVP

MVP —Å–∏—Å—Ç–µ–º–∞ WhatsApp-–±–æ—Ç–æ–≤ –¥–ª—è –æ—Ç–µ–ª–µ–π —Å —Ñ–æ–∫—É—Å–æ–º –Ω–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–∞–º–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏.

## üöÄ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **Multi-tenant –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ 50+ –æ—Ç–µ–ª–µ–π
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Green API** –¥–ª—è WhatsApp —Å–æ–æ–±—â–µ–Ω–∏–π
- **AI-–∞–Ω–∞–ª–∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–π** —á–µ—Ä–µ–∑ DeepSeek API
- **–°–∏—Å—Ç–µ–º–∞ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã—Ö –æ—Ç–∑—ã–≤–æ–≤** —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** —Å Celery –∏ Redis

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏:
- **Core Bot Engine** - —è–¥—Ä–æ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π WhatsApp
- **Trigger Management** - —Å–∏—Å—Ç–µ–º–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –¥–ª—è –æ—Ç–µ–ª–µ–π
- **AI Response Module** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å DeepSeek API
- **Hotel Management** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–µ–ª—è–º–∏ –∏ –∏—Ö —Å–ø–µ—Ü–∏—Ñ–∏–∫–æ–π
- **Analytics & Monitoring** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –Ω–µ–≥–∞—Ç–∏–≤–∞ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- **Database Layer** - —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ –æ—Ç–µ–ª—è–º –∏ –≥–æ—Å—Ç—è–º

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫:
- **Backend**: FastAPI (Python 3.11+)
- **Database**: PostgreSQL + Redis
- **Queue**: Celery –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á
- **AI**: DeepSeek API
- **WhatsApp**: Green API
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: Prometheus + Grafana

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### üöÄ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞

**–ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç —É–∂–µ —Ä–∞–±–æ—Ç–∞–ª —Ä–∞–Ω–µ–µ, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–∏ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞:**

#### –í–∞—Ä–∏–∞–Ω—Ç 1: –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π (—Å—Ç–∞–±–∏–ª—å–Ω—ã–π)
```bash
python run_server.py
```
*–û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä —Å –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é*

#### –í–∞—Ä–∏–∞–Ω—Ç 2: –î–ª—è –æ—Ç–ª–∞–¥–∫–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö)
```bash
python simple_working_server.py
```
*–£–ø—Ä–æ—â–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è*

#### –í–∞—Ä–∏–∞–Ω—Ç 3: –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è
```bash
python app_minimal.py
```
*–ë–∞–∑–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –±–µ–∑ —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π*

#### –í–∞—Ä–∏–∞–Ω—Ç 4: –ü–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è (–º–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
```bash
python app_full.py
```
*–ü–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å–æ –≤—Å–µ–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏*

### üìç –î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é
–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ª—é–±–æ–≥–æ –∏–∑ —Å–µ—Ä–≤–µ—Ä–æ–≤:
- **–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å**: http://localhost:8000/api/v1/admin/dashboard
- **API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: http://localhost:8000/docs
- **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: http://localhost:8000/redoc

### ‚ö†Ô∏è –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

**–û—à–∏–±–∫–∞ "ModuleNotFoundError: No module named 'fastapi'":**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt
```

**–û—à–∏–±–∫–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö:**
```bash
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–ø—Ä–æ—â–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
python simple_working_server.py
```

**–û—à–∏–±–∫–∞ —Å –º–∏–≥—Ä–∞—Ü–∏—è–º–∏:**
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
python -m alembic upgrade head
```

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.11+
- Docker –∏ Docker Compose
- PostgreSQL 15+
- Redis 7+

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è**
```bash
git clone https://github.com/your-org/whatsapp-hotel-bot.git
cd whatsapp-hotel-bot
```

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
python -m venv venv
source venv/bin/activate  # Linux/Mac
# –∏–ª–∏
venv\Scripts\activate  # Windows

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt
```

3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è**
```bash
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª —Å –≤–∞—à–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
```

4. **–ó–∞–ø—É—Å–∫ —Å Docker Compose**
```bash
docker-compose up -d
```

5. **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π**
```bash
alembic upgrade head
```

6. **–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**
```bash
uvicorn app.main:app --reload
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:8000

### API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **Swagger UI**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```env
# Database
DATABASE_URL=postgresql+asyncpg://user:password@localhost:5432/hotel_bot

# Redis
REDIS_URL=redis://localhost:6379

# Green API (WhatsApp)
GREEN_API_INSTANCE_ID=your_instance_id
GREEN_API_TOKEN=your_api_token

# DeepSeek AI
DEEPSEEK_API_KEY=your_deepseek_api_key

# Security
SECRET_KEY=your-super-secret-key
```

### Green API –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [Green API](https://green-api.com)
2. –°–æ–∑–¥–∞–π—Ç–µ –∏–Ω—Å—Ç–∞–Ω—Å –∏ –ø–æ–ª—É—á–∏—Ç–µ Instance ID –∏ API Token
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ webhook URL: `https://your-domain.com/api/v1/webhooks/green-api`

### DeepSeek API –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [DeepSeek](https://platform.deepseek.com)
2. –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á
3. –î–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
pytest

# –ó–∞–ø—É—Å–∫ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
pytest --cov=app --cov-report=html

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
pytest tests/test_main.py -v
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### Health Check

```bash
curl http://localhost:8000/health
```

### –ú–µ—Ç—Ä–∏–∫–∏

- **Prometheus**: http://localhost:9090 (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω)
- **Grafana**: http://localhost:3000 (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω)

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### Docker

```bash
# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
docker build -t whatsapp-hotel-bot .

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker run -p 8000:8000 whatsapp-hotel-bot
```

### Docker Compose (Production)

```bash
docker-compose -f docker-compose.prod.yml up -d
```

## üìù API Endpoints

### –û—Å–Ω–æ–≤–Ω—ã–µ endpoints

- `GET /` - –ö–æ—Ä–Ω–µ–≤–æ–π endpoint
- `GET /health` - Health check
- `GET /api/v1/health/detailed` - –î–µ—Ç–∞–ª—å–Ω—ã–π health check
- `POST /api/v1/webhooks/green-api` - Webhook –¥–ª—è Green API
- `GET /api/v1/hotels` - –°–ø–∏—Å–æ–∫ –æ—Ç–µ–ª–µ–π
- `POST /api/v1/hotels` - –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–µ–ª—è

## ü§ù –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
app/
‚îú‚îÄ‚îÄ api/                 # API endpoints
‚îÇ   ‚îî‚îÄ‚îÄ v1/
‚îÇ       ‚îú‚îÄ‚îÄ endpoints/   # Endpoint handlers
‚îÇ       ‚îî‚îÄ‚îÄ api.py       # API router
‚îú‚îÄ‚îÄ core/                # Core functionality
‚îÇ   ‚îú‚îÄ‚îÄ config.py        # Configuration
‚îÇ   ‚îú‚îÄ‚îÄ database.py      # Database connection
‚îÇ   ‚îî‚îÄ‚îÄ security.py      # Security utilities
‚îú‚îÄ‚îÄ models/              # SQLAlchemy models
‚îú‚îÄ‚îÄ schemas/             # Pydantic schemas
‚îú‚îÄ‚îÄ services/            # Business logic
‚îî‚îÄ‚îÄ utils/               # Utility functions
```

### –°—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∫–æ–¥–∞

- **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: Black
- **–ò–º–ø–æ—Ä—Ç—ã**: isort
- **–õ–∏–Ω—Ç–∏–Ω–≥**: flake8
- **–¢–∏–ø–∏–∑–∞—Ü–∏—è**: mypy

```bash
# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
black app/
isort app/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
flake8 app/
mypy app/
```

## üìã Roadmap

### –§–∞–∑–∞ 1 (MVP) ‚úÖ
- [x] –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Green API
- [x] –ü—Ä–æ—Å—Ç—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã (–≤—Ä–µ–º—è –ø–æ—Å–ª–µ –∑–∞–µ–∑–¥–∞)
- [x] –ì–æ—Ç–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã –≤–æ–ø—Ä–æ—Å–æ–≤
- [x] –ë–∞–∑–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑ –Ω–µ–≥–∞—Ç–∏–≤–∞ —á–µ—Ä–µ–∑ DeepSeek

### –§–∞–∑–∞ 2 (–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)
- [ ] –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–π
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∞
- [ ] –î–µ—Ç–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å PMS –æ—Ç–µ–ª–µ–π

### –§–∞–∑–∞ 3 (–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)
- [ ] –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ –∏—Å—Ç–æ—Ä–∏–∏ –≥–æ—Å—Ç–µ–π
- [ ] –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å
- [ ] –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç—ã

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. [LICENSE](LICENSE) —Ñ–∞–π–ª –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- **Issues**: [GitHub Issues](https://github.com/your-org/whatsapp-hotel-bot/issues)
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: [Wiki](https://github.com/your-org/whatsapp-hotel-bot/wiki)
- **Email**: support@hotelbot.com


–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ ‚úÖ –ì–û–¢–û–í–ê
‚úÖ FastAPI + SQLAlchemy + Alembic
‚úÖ PostgreSQL/SQLite + Redis
‚úÖ Celery + Green API + DeepSeek AI
‚úÖ Multi-tenant –ø–æ–¥–¥–µ—Ä–∂–∫–∞
‚úÖ Comprehensive security
‚úÖ Performance optimization
üåê –î–û–°–¢–£–ü–ù–´–ï –≠–ù–î–ü–û–ò–ù–¢–´
–û—Å–Ω–æ–≤–Ω—ã–µ API:
GET /health - Health check
GET /api/v1/system/info - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ
GET /api/v1/hotels - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–µ–ª—è–º–∏
GET /api/v1/conversations - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞–º–∏
POST /api/v1/webhooks/green-api - Webhook –æ–±—Ä–∞–±–æ—Ç–∫–∞
GET /api/v1/triggers - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–∞–º–∏
GET /api/v1/templates - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞–º–∏
GET /api/v1/admin/dashboard - –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
Performance Monitoring:
GET /api/v1/performance/status - –°—Ç–∞—Ç—É—Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π
GET /api/v1/performance/metrics - –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
GET /docs - Swagger UI
GET /redoc - ReDoc